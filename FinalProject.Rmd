---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r message=FALSE}
library(tidyverse)
library(mosaic)
library(readr)
library(httr)
library(RCurl)
```

#Looking at the original files
As seen in the inital importation of the data, many, almost none, of the variables have names that give us information on what is in each column. So, we will have to re-organize the data into tidy format and rename the variables so that others looking at the data will be able to known what information is contained in the datasets. 
```{r}
#Import in the Livestock monthly data
myFile <- "https://raw.githubusercontent.com/shravanisamala/FinalProject-/master/Livestock%20monthly.csv"
LivestockMonthly <- read_csv(myFile)

head(LivestockMonthly)
glimpse(LivestockMonthly)

#Import in the Livestock yearly data 
myFile2 <- "https://raw.githubusercontent.com/shravanisamala/FinalProject-/master/Livestock%20yearly.csv"
LivestockYearly <- read_csv(myFile2)

head(LivestockYearly)
glimpse(LivestockYearly)

```

#Cleaning up Livestock Monthly and Livestock Yearly CSVs
```{r}
#Monthly
LivestockMonthlyClean<-
  LivestockMonthly %>%
  filter(row_number() > 1)%>%
  mutate(X4 = as.integer(X4),
         X5 = as.integer(X5),
         X6 = as.integer(X6),
         X7 = as.integer(X7),
         X8 = as.integer(X8),
         X9 = as.integer(X9),
         X10 = as.integer(X10))%>%
  rename('Animal_Imp_or_Exp' = 'Meat and livestock monthly U.S. trade',
         countryCode = X2, 
         country = X3,
         sep_18 = X4,
         oct_18 = X5, 
         nov_18 = X6,
         dec_18 = X7,
         jan_19 = X8, 
         feb_19 = X9, 
         mar_19 = X10,
         apr_19 = X11,
         may_19 = X12, 
         jun_19 = X13, 
         jul_19 = X14, 
         aug_19 = X15, 
         sep_19 = X16)%>%
  filter(countryCode != "Total")%>%
  select(Animal_Imp_or_Exp,country,sep_18,oct_18,nov_18,dec_18,jan_19,feb_19,mar_19,apr_19,may_19,jun_19,jul_19,aug_19,sep_19)%>%
  gather(key = Month, value = Animal_Imp_or_Exp,sep_18,oct_18,nov_18,dec_18,jan_19,feb_19,mar_19,apr_19,may_19,jun_19,jul_19,aug_19,sep_19 )


head(LivestockMonthlyClean)

LivestockMonthlyClean

```

#Yearly
```{r}
LivestockYearlyClean <- 
  LivestockYearly %>%
  filter(row_number() > 1)%>%
  mutate(X4 = as.integer(X4),
         X5 = as.integer(X5),
         X6 = as.integer(X6),
         X7 = as.integer(X7),
         X8 = as.integer(X8),
         X9 = as.integer(X9),
         X10 = as.integer(X10))%>%
  rename(Animal_Imp_or_Exp = 'Meat and livestock annual cumulative year-to-date U.S. trade',
         countryCode = X2, 
         country = X3,
         year2014 = X4,
         year2015 = X5, 
         year2016 = X6,
         year2017 = X7,
         year2018 = X8, 
         jan_sep18 = X9, 
         jan_sep19 = X10)%>%
  filter(countryCode != "Total")%>%
  select(Animal_Imp_or_Exp,country,year2014,year2015,year2016,year2017,year2018,jan_sep19)%>%
  gather(key = year, value = amount_in_1000s, year2014,year2015,year2016,year2017,year2018,jan_sep19)
  






#LivestockYearlyCleanTwo <-
  for(i in 1:nrow(LivestockYearlyClean)){
    j <- i-1
    if(LivestockYearlyClean$Animal_Imp_or_Exp[i] %in% NA){
      LivestockYearlyClean$Animal_Imp_or_Exp[i] <- LivestockYearlyClean$Animal_Imp_or_Exp[j]
    }
  }

LivestockYearlyClean         

#LivestockYearlyCleanTwo

LivestockYearlyClean

         


```

#Look at Yearly total meat movement
```{r}
Yearly_Movement_Country <- 
  LivestockYearlyClean%>%
  filter(amount_in_1000s > 0)%>%
  group_by(year,country)%>%
  summarise(total_Movement = sum(amount_in_1000s))%>%
  arrange(desc(total_Movement))
  
Yearly_Movement_Country
```

#Protient Movement Global Ranking and change over the past years
```{r}
Yearly_Movement_2014 <-
  Yearly_Movement_Country %>%
  mutate(the_rank = rank(desc(total_Movement)))%>%
  filter(year == "year2014")%>%
  filter(the_rank < 11.0)
  



Yearly_Movement


```









#Graphics

```{r}
Yearly_Movement




```










